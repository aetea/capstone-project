{% extends "base.html" %}

{% block title %} 

    Welcome! 
    {% if city %}
        <!-- Welcome to {{ city.city_name.title() }}!  -->
    {% endif %}

{% endblock %}
    
    
{% block body %} 
    {% set ns = namespace(saved=false) %}
    
    {% if not city %}
    <!-- NO CITY: show if user navigated here directly -->

        <div> 
            <h2>Oops! Looks like we don't have any info. Please try again.</h2>
            <h2>Where in the world would you like to go? 
                Enter a city in the search box above</h2>
        </div> 

    {% endif %}

    {% if city %} 

        {# ------- check if user has already saved this city ------- #}
        {% for uc in user.user_cities %}
            {% if city.city_name == uc.city.city_name %}
                {% set ns.saved = true %}
            {% endif %}
        {% endfor %}

        <!-- section 0: city name and photo -->
        <div>
            <table>
                <tr>
                    <td><h1 id="city-header">{{ city.city_name.title() }}</h1></td>
                    <td>(insert photo here)</td>
                </tr>
                <tr>
                    <td>{{city}}</td>
                </tr>
                <tr>
                    <td>Here's some info about it... <br></td>
                </tr>
                <tr>
                    <td id="country">Country: {{ city.country.title() }} </td>
                </tr>
                <tr>
                    {% if ns.saved == false %}
                        <td id="save-btn">
                            <form action="/save-city" method="POST">
                                <button name="save-btn" value={{city.city_id}}>
                                    Fav {{ city.city_name }}
                                </button>
                            </form>
                        </td>
                    {% else %}
                        {# FIXME: replace with unsave button #}
                        <td>*** Already saved city ***</td>
                    {% endif %}
                </tr>
            </table>
        </div>

        <!-- TODO: make tables inside divs for header & body separation -->
        <!-- section 1: safety score -->
        <div class="scorebox" id="safety-field"> 
            <h2>safety: B</h2>
            <p> FILL FROM API </p>
        </div>
    
        <!-- section 2: cost of living -->
        <div class="scorebox" id="cost-field">
            <h2>cost of living: D</h2>
            <p> FILL FROM API </p>
        </div>

        <!-- section 3: quality of life -->
        <div class="scorebox" id="quality-field">
            <h2>quality of life: B</h2>
            <p> FILL FROM API </p>
        </div>

    {% endif %}

    {# 
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="/static/ajax.js"></script> 
    #}

{% endblock %}