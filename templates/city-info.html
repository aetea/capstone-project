{% extends "base.html" %}

{% block title %} 

    Welcome! 
    {% if city %}
        Welcome to {{ city["city_name"].title() }}!
    {% endif %}

{% endblock %}
    
    
{% block body %} 

{% if not city %}
<!-- NO CITY: show if user navigated here directly -->

    <div> 
        <h2>Oops! Looks like we don't have any info. Please try another city name.</h2>
        <h2>Where in the world would you like to go? 
            Enter a city in the search box above</h2>
    </div> 
    
    {% endif %}
    
    {% set ns = namespace(saved=false) %}
    {% if city %} 

        {# ------- check if user has already saved this city ------- #}
        {% for uc in user.user_cities %}
            {% if city["city_id"] == uc.city.city_id %}
                {% set ns.saved = true %}
            {% endif %}
        {% endfor %}

        <!-- section 0: city name and photo -->

        <div>
            <h1 id="city-header">{{ city["city_name"].title() }}</h1>
        </div>
        
        <div class="row" >
            <div id="city-info">
                <p>display object info</p>
                <p>{{ city }}</p>
                <p>Here's some info about it...</p>
                <p id="country">Country: {{ city["country"].title() }}</p>
            </div>
            <div id="city-photo">(insert photo)</div>
        </div>

        <div class="button" id="save-btn">
            {% if ns.saved == false %}
                <form action="/save-city" method="POST">
                    <button name="save-btn" value={{city["city_id"]}}>
                        Fav {{ city["city_name"] }}
                    </button>
                </form>
            {% else %}
                *** Already saved city ***
                <form action="/unsave-city" method="POST">
                    <button name="unsave-btn" value={{city["city_id"]}}>
                        Unfave
                    </button>
                </form>
            {% endif %}
        </div>

        <div><ul>
            {% for cat in city["scores"].items() %}
                <li>{{ cat }}</li>
            {% endfor %}
        </ul></div>

        <!-- section 1: safety score -->
        <div class="scorebox" id="safety-field"> 
            <h2>safety: {{ city["scores"]["Safety"] }}</h2>
        </div>
    
        <!-- section 2: cost of living -->
        <div class="scorebox" id="cost-field">
            <h2>cost of living: {{ city["scores"]["Cost of Living"] }}</h2>
        </div>

        <!-- section 3: quality of life -->
        <div class="scorebox" id="culture-field">
            <h2>leisure & culture: {{ city["scores"]["Leisure & Culture"] }}</h2>
        </div>

        <div class="scorebox" id="healthcare-field">
            <h2>healthcare: {{ city["scores"]["Healthcare"] }} </h2>
        </div>

    {% endif %}

    {# 
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="/static/ajax.js"></script> 
    #}

{% endblock %}